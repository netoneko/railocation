%script{:src=>"http://maps.google.com/maps/api/js?sensor=false"}
:javascript
  function initialize() {
    var myLatLng = new google.maps.LatLng(#{google_map_get_center_for_route(route)});
    var myOptions = {
      zoom: 12,
      center: myLatLng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
 
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
 
    var stationsCoordinates = [new google.maps.LatLng(#{route.values.join('), new google.maps.LatLng(')})];

    #{google_map_js_route(route)}
    
    var path = new google.maps.Polyline({
      path: stationsCoordinates,
      strokeColor: "#FF0000",
      strokeOpacity: 1.0,
      strokeWeight: 2
    });
 
   path.setMap(map);
  }
%div{:id=>"map_canvas", :style=>"width:400px; height:400px;"}